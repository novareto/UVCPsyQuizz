[buildout]
extends = ./profiles/bgetem/parameters.cfg
develop = ./checkouts/nva.psyquizz
parts += python migrate_duration migrate_strategy migrate_anonymous pytest migrate_criterias_order migrate_criterias_session remove_sessionid

[python]
recipe = zc.recipe.egg
interpreter = py
eggs = nva.psyquizz

[migrate_duration]
recipe = collective.recipe.scriptgen
cmd = ${buildout:bin-directory}/${python:interpreter}
arguments = ${buildout:directory}/run/migrate_duration.py ${settings:DSN}

[migrate_strategy]
recipe = collective.recipe.scriptgen
cmd = ${buildout:bin-directory}/${python:interpreter}
arguments = ${buildout:directory}/run/migrate_strategy.py ${settings:DSN}

[migrate_anonymous]
recipe = collective.recipe.scriptgen
cmd = ${buildout:bin-directory}/${python:interpreter}
arguments = ${buildout:directory}/run/migrate_anonymous.py ${settings:DSN}

[migrate_criterias_order]
recipe = collective.recipe.scriptgen
cmd = ${buildout:bin-directory}/${python:interpreter}
arguments = ${buildout:directory}/run/migrate_criterias_order.py ${settings:DSN}

[migrate_criterias_session]
recipe = collective.recipe.scriptgen
cmd = ${buildout:bin-directory}/${python:interpreter}
arguments = ${buildout:directory}/run/migrate_criterias_session.py ${settings:DSN}

[remove_sessionid]
recipe = collective.recipe.scriptgen
cmd = ${buildout:bin-directory}/${python:interpreter}
arguments = ${buildout:directory}/run/remove_sessionid.py ${settings:DSN}

[pytest]
recipe = zc.recipe.egg
entry-points = pytest=pytest:main
scripts = pytest
eggs = 
    ${app:eggs}
    nva.psyquizz[test] 
    pytest
arguments = ['--zcml', '${zcml:output}', '${buildout:sources-dir}/nva.psyquizz/src'] + sys.argv[1:]
